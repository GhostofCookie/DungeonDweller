CC = g++
ARCHIVEDIR = ../Menu ../GameState ../Screen ../Image ../ImageImporter ../Room ../RoomTree
CCFLAGS = -Wall -std=c++11 -I$(ARCHIVEDIR) -g -lcppunit -ldl -fprofile-arcs -ftest-coverage
LIB = ./lib
LINKS = -L $(LIB)

### All .o files for the project ###
MENU = ../Menu/CharacterMenu.o ../Menu/ConnectFourMenu.o ../Menu/DialogueMenu.o 
MENU +=../Menu/ExploreMenu.o ../Menu/FightMenu.o ../Menu/HanoiMenu.o 
MENU += ../Menu/MainMenu.o ../Menu/MemoryMenu.o ../Menu/Menu.o 
MENU += ../Menu/RiddleMenu.o ../Menu/TicTacToeMenu.o ../Menu/TradeMenu.o
#GAMESTATE = ../GameState/ExploreState.o ../GameState/DialogueState.o
#GAMESTATE += ../GameState/MainState.o ../GameState/FightState.o
#GAMESTATE += ../GameState/PuzzleState.o ../GameState/TradeState.o
SCREEN = ../Screen/Screen.o ../Screen/SlotScreen.o
IMAGE = ../Image/Image.o ../Image/ImportImg.o ../Image/DefaultImg.o 
IMAGE +=../ImageImporter/ImageImporter.o
ROOM =  ../Room/Room.o
ROOMTREE = ../RoomTree/RoomTree.o
PUZZLE = ##../Puzzles/CodeCracker.o ../Puzzles/ConnectFour.o ../Puzzles/Hanoi.o 
#PUZZLE += ../Puzzles/MemoryMatch.o ../Puzzles/TicTacToe.o   
ITEM = ##../Item/Item.o ../Item/Weapon.o ../Item/MyWeapons.o ../Item/MyConsumables.o
CHARACTER = ## ../Character/Npc.o ../Character/Player.o
OBJS = $(MENU) $(SCREEN) $(IMAGE) $(ROOM) $(ROOMTREE) $(GAMESTATE) $(PUZZLE) 
OBJS += $(ITEM) $(CHARACTER) $(GAMESTATE) DungeonDweller.o


## targets and prerequisites
.PHONY : all
all : DungeonDweller

DungeonDweller : $(LIB)/DD_Lib.a
	$(CC) $^ -o $@ $(LINKS)

## default rule for compiling .cc to .o
%.o : %.cpp
	$(CC) -c -o $@ $(CCFLAGS) $<



## generate the prerequisites and append to the desired file
#.prereq : $(OBJS:.o=.cpp) $(wildcard *.h) Makefile
#	rm -f .prereq
#	$(CC) $(CCFLAGS) -MM $(OBJS:.o=.cpp) >> ./.prereq



## include the generated prerequisite file
#include .prereq

.PHONY : clean
clean:
	rm -f *.o
	rm -f *~ *# .#*
	rm -f *.gcno *.gcda

.PHONY : clean-all
clean-all : clean
	rm -f DungeonDweller
